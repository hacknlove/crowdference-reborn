<template name="menuVerClip">
  <div class="fondo fondoDeMenu fade close"></div>
  <div class="menu fade close">
    {{#if miClip clipId}}
    {{#if llaves}}
    <div class="openWindow" data-_id="llaves"><i class="fas fa-key"></i> {{_ 'Llaves'}}</div>
    {{else}}
    <div class="olvidar"><i class="fas fa-unlink"></i> {{_ 'Olvidar'}}</div>
    {{/if}}
    {{else}}
    <div class="recordar"><i class="fas fa-paperclip"></i> {{_ 'Recordar'}}</div>
    <hr>
    {{/if}}
    <div class="compartir"><i class="fas fa-share-alt"></i> {{_ 'Compartir'}}</div>
    <div class="close openWindow" data-_id="agregarEnlace"><i class="fas fa-plus"></i> {{_ 'Agregar'}}</div>
    <div class="salir"><i class="fas fa-arrow-left"></i> {{_ 'Atrás'}}</div>
  </div>
</template>

<template name="verClip">
  <div class="fade lista">
    <div class="cabecero">
      <h2>
        {{clip.titulo}}
      </h2>
      {{>hamburguesa menu="menuVerClip"}}
    </div>
    <div class="cuerpo">
      {{#each post in posts}}
        {{> vistaPreviaPost post}}
      {{else}}
        <div class="ventana">
          <div class="cabecero">
            {{_ 'Clip vacío'}}
          </div>
          <div class="cuerpo">
            {{_ 'Agrega enlaces al clip.'}}
          </div>
        </div>
      {{/each}}
    </div>
  </div>
</template>

<template name="vistaPreviaPost">
  <div class="ventana">
    <div class="cabecero">
      {{fecha timestamp}}
      {{#if admin}}
        - {{status}} - {{prioridad}}
      {{/if}}
      <i class="fas fa-bars"></i>
    </div>
    <div class="cuerpo">
      {{#if link}}
        {{>previsualizacion link=link}}
      {{/if}}
      <div class="miniFondo">
        <div class="menu">
          <div class="openWindow" data-template="crearClip" data-post-id="{{_id}}"><i class="fas fa-paperclip"></i> {{_ 'Crear clip'}}</div>
          <div class="copiar"><i class="fas fa-share-alt"></i> {{_ 'Compartir'}}</div>
          {{#if clips}}
            <div class="openWindow" data-template="link" data-post-id="{{_id}}"><i class="fas fa-search"></i> {{_ 'buscar'}}</div>
          {{/if}}
          {{#if admin}}
            {{#if comprobarStatus 'PENDIENTE'}}
            <div class="establecerStatus" data-status="OCULTO"><i class="fas fa-check"></i> {{_ 'Aprobar'}}</div>
            <div class="establecerStatus" data-status="RECHAZADO"><i class="fas fa-ban"></i> {{_ 'Rechazar'}}</div>
            {{/if}}
            {{#if comprobarStatus 'RECHAZADO'}}
            <div class="establecerStatus" data-status="OCULTO"><i class="fas fa-check"></i> {{_ 'Aprobar'}}</div>
            <div class="eliminar"><i class="fas fa-trash"></i> {{_ 'Eliminar'}}</div>
            {{/if}}
            {{#if comprobarStatus 'VISIBLE'}}
            <div class="establecerStatus" data-status="OCULTO"><i class="fas fa-eye-slash"></i> {{_ 'Ocultar'}}</div>
            {{/if}}
            {{#if comprobarStatus 'OCULTO'}}
            <div class="establecerStatus" data-status="VISIBLE"><i class="fas fa-eye"></i> {{_ 'Mostrar'}}</div>
            <div class="eliminar"><i class="fas fa-trash"></i> {{_ 'Eliminar'}}</div>
            {{/if}}
            <div class="openWindow" data-template="prioridad" data-post-id="{{_id}}"><i class="fas fa-sort"></i> {{_ 'Prioridad'}}</div>
          {{/if}}
        </div>
      </div>
    </div>
  </div>
</template>

<template name="llaves">
  <div class="fondo fade"></div>
  <div class="ventana fade scrollable">
    <div class="cabecero">
      {{_ 'Llaves'}}
      <i class="fas fa-times close"></i>
    </div>
    <div class="cuerpo">

      {{#if secreto}}
        <div class="informacion llave">
          <div>
            <h3>{{_ 'Llave de administración'}}</h3>
            <p>
              {{_ 'Con esta llave se puede administrar el clip'}}
            </p>
            <div class="iconera">
              <i class="fas fa-copy copiar" data-llave="secreto" title="copiar llave"></i>
              <i class="fas fa-trash olvidar" data-llave="secreto" title="olvidar llave"></i>
              {{#if seguridad}}
                <i class="fas fa-sync-alt revocar" data-llave="secreto" title="cambiar llave"></i>
              {{/if}}
            </div>
          </div>
        </div><br>
      {{/if}}
      {{#if seguridad}}
        <div class="informacion seguridad">
          <div>
            <h3>{{_ 'Llave de seguridad'}}</h3>
            <p>
              {{_ 'Con esta llave se pueden revocar las llaves de administración y seguridad.'}}
            </p>
            <div class="iconera">
              <i class="fas fa-copy copiar" data-llave="seguridad" title="copiar llave"></i>
              <i class="fas fa-trash olvidar" data-llave="seguridad" title="olvidar llave"></i>
              <i class="fas fa-sync-alt revocar" data-llave="seguridad" title="cambiar llave"></i>
            </div>
          </div>
        </div>
      {{/if}}
    </div>
    <div class="botonera">
      <button class="close">{{_ 'Hecho'}}</button>
    </div>
  </div>
</template>


<template name="prioridad">
  <div class="fondo fade"></div>
  <div class="ventana fade scrollable">
    <div class="cabecero">
      {{_ 'Prioridad'}}
      <i class="fas fa-times close"></i>
    </div>
    <div class="cuerpo">
      <div class="informacion">
          {{_ 'Los enlaces se ordenan por su prioridad, de mayor a menor, y por la fecha en la que han sido agregados.'}}
      </div>
      <br>
      <input type="number" name="prioridad" value="{{prioridad}}">
    </div>
    <div class="botonera">
      <button class="secundario close">{{_ 'Cancelar'}}</button>
      <button class="aceptar">{{_ 'Aceptar'}}</button>
    </div>
  </div>
</template>
